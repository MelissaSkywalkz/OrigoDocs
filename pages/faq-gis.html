<!doctype html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FAQ GIS</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../assets/css/main.css" />
  </head>
  <body class="layout">
    <nav class="sidenav" id="sidenav" aria-label="Sidomeny">
      <div class="sidebar-header">
        <a href="../index.html" class="logo" aria-label="Till startsidan">>_ Origo Docs</a>
      </div>
      <div class="nav-search">
        <input type="search" id="navSearch" placeholder="Sök i GIS-handboken…" aria-label="Sök" />
        <ul id="searchResults" class="search-results hidden"></ul>
      </div>
      <div class="nav-content">
        <div class="nav-section">
          <button class="accordion-button" aria-expanded="true" aria-controls="nav-docs">
            Dokumentation
          </button>
          <div class="accordion-panel" id="nav-docs">
            <a href="../index.html">Start</a>
            <a href="page.html">JSON 101</a>
            <a href="origo-guide.html">Origo guide</a>
            <a href="layermanager.html">Layermanager</a>
            <a href="geoserver.html">GeoServer 101</a>
            <a href="geoserver-styles.html">GeoServer styles</a>
            <a href="geowebcache.html">GeoWebCache</a>
            <a href="origo-server.html">Origo Server</a>
            <a href="git-vscode.html">Git & VS Code</a>
            <a href="examples.html">Origo-recept</a>
            <a href="try-it.html">Try it-lab</a>
            <a href="faq-gis.html" aria-current="page">FAQ GIS</a>
            <a href="npm.html">npm & plugins</a>
            <a href="release-playbook.html">Release‑playbook</a>
            <a href="troubleshooting.html">Felsökning</a>
          </div>
        </div>
        <div class="nav-section">
          <button class="accordion-button" aria-expanded="false" aria-controls="nav-shortcuts">
            Snabblänkar
          </button>
          <div class="accordion-panel" id="nav-shortcuts" hidden>
            <a href="https://docs.geoserver.org/">GeoServer Docs (extern)</a>
            <a href="https://origo-map.github.io/origo-documentation/latest/#origo-map"
              >Origo Docs (extern)</a
            >
          </div>
        </div>
      </div>
    </nav>

    <div class="nav-backdrop" hidden></div>

    <main class="main" id="main">
      <header class="topbar">
        <button
          class="nav-toggle"
          data-nav-toggle
          aria-label="Öppna eller stäng meny"
          aria-expanded="true"
        >
          <img src="../sort.png" alt="" />
        </button>
        <div class="topbar-title">
          <span class="eyebrow">FAQ</span>
          <h1>FAQ GIS</h1>
        </div>
        <div class="topbar-meta">
          <span class="status-pill">FAQ</span>
        </div>
      </header>

      <section class="doc-content">
        <h2>Vanligaste felen och lösningar</h2>

        <details class="faq-item">
          <summary class="faq-question">Kartan visar inte mina lager</summary>
          <div class="faq-answer">
            <h4>Möjliga orsaker</h4>
            <ol>
              <li>CORS blockerar anrop (kontrollera Console → CORS-fel).</li>
              <li>Fel URL (workspace/layer/endpoint) eller 404/403.</li>
              <li>Fel CRS/projection (t.ex. kartan i 3006 men tjänsten svarar i 3857).</li>
              <li>GeoServer saknar rättigheter för användaren/rollen.</li>
            </ol>

            <h4>Snabbt test</h4>
            <pre><code>curl -I https://server/geoserver/workspace/wms</code></pre>

            <h4>Tips</h4>
            <ul>
              <li>Testa samma URL i webbläsaren (GetCapabilities).</li>
              <li>Jämför CRS i Origo-konfig och i tjänstens svar.</li>
            </ul>
          </div>
        </details>

        <details class="faq-item">
          <summary class="faq-question">Lagret syns men hamnar “fel” på kartan</summary>
          <div class="faq-answer">
            <ul>
              <li>
                CRS mismatch: säkerställ att Origo och tjänsten använder samma EPSG (t.ex. 3006).
              </li>
              <li>Fel axis order (WMS 1.3.0 kan byta ordning för vissa CRS).</li>
              <li>Data är publicerad i ett annat CRS än du tror.</li>
            </ul>
          </div>
        </details>

        <details class="faq-item">
          <summary class="faq-question">WMS eller WFS – vad ska jag använda?</summary>
          <div class="faq-answer">
            <ul>
              <li><strong>WMS</strong>: bilder (snabbt, bra för visning).</li>
              <li>
                <strong>WFS</strong>: geometrier/attribut (bra för klick/urval/analys, kan bli
                tungt).
              </li>
              <li>För stora datamängder: överväg generalisering, bounding box-filter, paging.</li>
            </ul>
          </div>
        </details>

        <details class="faq-item">
          <summary class="faq-question">Prestanda är dålig – vad är vanligast?</summary>
          <div class="faq-answer">
            <ol>
              <li>För många features i WFS utan filter.</li>
              <li>Ingen caching (t.ex. GeoWebCache) för WMS.</li>
              <li>Stilar (SLD) är tunga eller gör många beräkningar.</li>
              <li>Felaktiga index i databasen (PostGIS).</li>
            </ol>
          </div>
        </details>

        <h2>Felsökning</h2>

        <details class="faq-item">
          <summary class="faq-question">Vad ska jag kolla först?</summary>
          <div class="faq-answer">
            <ol>
              <li>DevTools → Console (CORS, 401/403, JS-fel).</li>
              <li>DevTools → Network (statuskoder, responstid, GetCapabilities).</li>
              <li>Verifiera CRS i config och i tjänstens svar.</li>
              <li>Testa endpoint med curl.</li>
            </ol>
          </div>
        </details>

        <details class="faq-item">
          <summary class="faq-question">Hur testar jag en WMS/WFS URL?</summary>
          <div class="faq-answer">
            <pre><code>curl -I "https://server/geoserver/workspace/wms?service=WMS&request=GetCapabilities"</code></pre>
            <pre><code>curl -I "https://server/geoserver/workspace/wfs?service=WFS&request=GetCapabilities"</code></pre>
            <p>
              Kontrollera att du får svar med status 200. Om du får 401/403 – kontrollera
              autentisering och rättigheter.
            </p>
          </div>
        </details>

        <details class="faq-item">
          <summary class="faq-question">Hur vet jag om det är CORS-problem?</summary>
          <div class="faq-answer">
            <p>
              Öppna DevTools (F12) och gå till Console-fliken. Leta efter felmeddelanden som nämner
              CORS eller “Access-Control-Allow-Origin”.
            </p>
            <pre><code>Access to XMLHttpRequest at 'https://server/geoserver/...' from origin 'http://localhost:3000' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.</code></pre>
            <p>
              Om du ser sådana fel, behöver servern (GeoServer) konfigureras för att tillåta
              förfrågningar från din Origo-klient.
            </p>
          </div>
        </details>

        <h2 id="wms-wfs-wmts">WMS, WFS och WMTS i Origo</h2>
        <p>Exempel på hur du definierar olika lager i Origo-konfigurationen:</p>
        <pre><code>{  "source": {
    "wms_example": {
      "url": "https://localhost/geoserver/example_workspace/wms",
      "version": "1.1.1"
    },
    "wfs_example": {
      "url": "https://localhost/geoserver/example_workspace/ows",
      "strategy": "all"
    },
    "wmts_example": {
      "url": "https://localhost/geoserver/example_workspace/gwc/service/wmts",
      "matrixSet": "EXAMPLE_3008_GRID",
      "matrixIdsPrefix": "EXAMPLE_3008_GRID:",
      "tileSize": [512, 512]
    }
  },
  "layers": [
    { "name": "example_layer_wms", "type": "WMS", "source": "wms_example" },
    { "name": "example_layer_wfs", "type": "WFS", "source": "wfs_example" },
    { "name": "example_layer_wmts", "type": "WMTS", "source": "wmts_example" }
  ]}
</code></pre>
      </section>
    </main>

    <script src="../assets/js/main.js"></script>
  </body>
</html>
