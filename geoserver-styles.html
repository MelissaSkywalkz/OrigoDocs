<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GeoServer – styles</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="main.css">
</head>
<body class="layout">
  <nav class="sidenav" id="sidenav" aria-label="Sidomeny">
    <div class="sidebar-header">
      <a href="index.html" class="logo" aria-label="Till startsidan">>_ Origo Docs</a>
    </div>
    <div class="nav-search">
      <input
        type="search"
        id="navSearch"
        placeholder="Sök i GIS-handboken…"
        aria-label="Sök"
      />
      <ul id="searchResults" class="search-results hidden"></ul>
    </div>
    <div class="nav-content">
      <div class="nav-section">
        <button class="accordion-button" aria-expanded="true" aria-controls="nav-docs">
          Dokumentation
        </button>
        <div class="accordion-panel" id="nav-docs">
          <a href="index.html">Start</a>
          <a href="page.html">JSON 101</a>
          <a href="origo-guide.html">Origo – guide</a>
          <a href="layermanager.html">Layermanager</a>
          <a href="geoserver.html">GeoServer 101</a>
          <a href="geoserver-styles.html">GeoServer – styles</a>
          <a href="geowebcache.html">GeoWebCache</a>
          <a href="git-vscode.html">Git & VS Code</a>
          <a href="examples.html">Origo-recept</a>
          <a href="faq-gis.html">FAQ GIS</a>
          <a href="npm.html">npm & plugins</a>
          <a href="troubleshooting.html">Felsökning</a>
        </div></div>
      </div>
      <div class="nav-section">
        <button class="accordion-button" aria-expanded="false" aria-controls="nav-shortcuts">
          Snabblänkar
        </button>
        <div class="accordion-panel" id="nav-shortcuts" hidden>
          <a href="https://docs.geoserver.org/">GeoServer Docs (extern)</a>
          <a href="https://origo-map.github.io/origo-documentation/latest/#origo-map">Origo Docs (extern)</a>
        </div></div>
      </div>
    </div>
  </nav>

  <main class="main" id="main">
    <header class="topbar">
      <button class="nav-toggle" data-nav-toggle aria-label="Öppna eller stäng meny" aria-expanded="true">
        <img src="sort.png" alt="" />
      </button>
      <div class="topbar-title">
        <span class="eyebrow">GeoServer</span>
        <h1>Styles: SLD, CSS, MBStyle</h1>
      </div>
      <div class="topbar-meta">
        <span class="status-pill">SE 1.1 fokus</span>
      </div>
    </header>

    <section class="wizard" data-wizard="geoserver-styles"></section>

    <section class="doc-content">
      <h2 id="oversikt">Översikt</h2>
      <p>
        GeoServer använder <strong>styles</strong> för att beskriva hur ett lager ska ritas.
        En style är en egen resurs som kan kopplas som <em>default</em> eller som alternativ.
      </p>
      <ul>
        <li><strong>Default style:</strong> används automatiskt om inget annat väljs.</li>
        <li><strong>Alternativa styles:</strong> kan väljas per lager eller i WMS‑anrop.</li>
        <li><strong>Layer ↔ style:</strong> kopplas i GeoServer, inte i klienten.</li>
      </ul>

      <h2 id="format">Välj rätt format</h2>
      <ul>
        <li><strong>SLD/SE 1.1:</strong> standardiserat och stabilt.</li>
        <li><strong>CSS Extension:</strong> snabbare att skriva, kräver extension.</li>
        <li><strong>MBStyle:</strong> passar vektor‑tiles och moderna kartstilar.</li>
      </ul>

      <h2 id="sld-cookbook">SLD Cookbook – färdiga exempel (SE 1.1)</h2>
      <p><strong>Denna SLD är en referensmall.</strong> Kopiera exakt.</p>
      <p><strong>Ändra endast:</strong> färg (fill, stroke), storlek (Size), stroke‑width. <strong>Ändra INTE:</strong> namespaces, <code>se:</code>-prefix, version, struktur.</p>

      <h3>POINT – enkel punkt (cirkel)</h3>
      <pre><code><?xml version="1.0" encoding="UTF-8"?>
<se:StyledLayerDescriptor version="1.1.0"
  xmlns:se="http://www.opengis.net/se"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://www.opengis.net/se
    https://schemas.opengis.net/se/1.1.0/Symbolizer.xsd">
  <se:NamedLayer>
    <se:Name>example_layer</se:Name>
    <se:UserStyle>
      <se:Title>Simple point style</se:Title>
      <se:FeatureTypeStyle>
        <se:Rule>
          <se:PointSymbolizer>
            <se:Graphic>
              <se:Mark>
                <se:WellKnownName>circle</se:WellKnownName>
                <se:Fill>
                  <se:SvgParameter name="fill">#0072B2</se:SvgParameter>
                </se:Fill>
                <se:Stroke>
                  <se:SvgParameter name="stroke">#ffffff</se:SvgParameter>
                  <se:SvgParameter name="stroke-width">1</se:SvgParameter>
                </se:Stroke>
              </se:Mark>
              <se:Size>10</se:Size>
            </se:Graphic>
          </se:PointSymbolizer>
        </se:Rule>
      </se:FeatureTypeStyle>
    </se:UserStyle>
  </se:NamedLayer>
</se:StyledLayerDescriptor>
</code></pre>
      <p><strong>När?</strong> Enkla punktlager. <strong>Koppling:</strong> ladda upp SLD och välj som style för lagret.</p>
      <p><strong>Om detta inte fungerar:</strong> kontrollera SE 1.1, <code>se:</code>-prefix, testa i GeoServer Preview.</p>

      <h3>POINT – ikon (ExternalGraphic)</h3>
      <pre><code><?xml version="1.0" encoding="UTF-8"?>
<se:StyledLayerDescriptor version="1.1.0"
  xmlns:se="http://www.opengis.net/se"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://www.opengis.net/se
    https://schemas.opengis.net/se/1.1.0/Symbolizer.xsd">
  <se:NamedLayer>
    <se:Name>example_layer</se:Name>
    <se:UserStyle>
      <se:Title>Point icon</se:Title>
      <se:FeatureTypeStyle>
        <se:Rule>
          <se:PointSymbolizer>
            <se:Graphic>
              <se:ExternalGraphic>
                <se:OnlineResource xlink:type="simple" xlink:href="https://localhost/icons/example.png"/>
                <se:Format>image/png</se:Format>
              </se:ExternalGraphic>
              <se:Size>20</se:Size>
            </se:Graphic>
          </se:PointSymbolizer>
        </se:Rule>
      </se:FeatureTypeStyle>
    </se:UserStyle>
  </se:NamedLayer>
</se:StyledLayerDescriptor>
</code></pre>
      <p><strong>När?</strong> Ikoner. <strong>Om detta inte fungerar:</strong> kontrollera att ikon‑URL är åtkomlig.</p>

      <h3>LINE – solid linje</h3>
      <pre><code><?xml version="1.0" encoding="UTF-8"?>
<se:StyledLayerDescriptor version="1.1.0"
  xmlns:se="http://www.opengis.net/se"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://www.opengis.net/se
    https://schemas.opengis.net/se/1.1.0/Symbolizer.xsd">
  <se:NamedLayer>
    <se:Name>example_layer</se:Name>
    <se:UserStyle>
      <se:Title>Solid line</se:Title>
      <se:FeatureTypeStyle>
        <se:Rule>
          <se:LineSymbolizer>
            <se:Stroke>
              <se:SvgParameter name="stroke">#444444</se:SvgParameter>
              <se:SvgParameter name="stroke-width">2</se:SvgParameter>
            </se:Stroke>
          </se:LineSymbolizer>
        </se:Rule>
      </se:FeatureTypeStyle>
    </se:UserStyle>
  </se:NamedLayer>
</se:StyledLayerDescriptor>
</code></pre>
      <p><strong>När?</strong> Vägar, lednät. <strong>Om detta inte fungerar:</strong> kontrollera SE 1.1.</p>

      <h3>LINE – streckad linje</h3>
      <pre><code><?xml version="1.0" encoding="UTF-8"?>
<se:StyledLayerDescriptor version="1.1.0"
  xmlns:se="http://www.opengis.net/se"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://www.opengis.net/se
    https://schemas.opengis.net/se/1.1.0/Symbolizer.xsd">
  <se:NamedLayer>
    <se:Name>example_layer</se:Name>
    <se:UserStyle>
      <se:Title>Dashed line</se:Title>
      <se:FeatureTypeStyle>
        <se:Rule>
          <se:LineSymbolizer>
            <se:Stroke>
              <se:SvgParameter name="stroke">#444444</se:SvgParameter>
              <se:SvgParameter name="stroke-width">2</se:SvgParameter>
              <se:SvgParameter name="stroke-dasharray">6 4</se:SvgParameter>
            </se:Stroke>
          </se:LineSymbolizer>
        </se:Rule>
      </se:FeatureTypeStyle>
    </se:UserStyle>
  </se:NamedLayer>
</se:StyledLayerDescriptor>
</code></pre>
      <p><strong>När?</strong> Planerade stråk.</p>
      <p><strong>Om detta inte fungerar:</strong> kontrollera att dasharray stöds och testa i Preview.</p>

      <h3>POLYGON – fyllning + kant</h3>
      <pre><code><?xml version="1.0" encoding="UTF-8"?>
<se:StyledLayerDescriptor version="1.1.0"
  xmlns:se="http://www.opengis.net/se"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://www.opengis.net/se
    https://schemas.opengis.net/se/1.1.0/Symbolizer.xsd">
  <se:NamedLayer>
    <se:Name>example_layer</se:Name>
    <se:UserStyle>
      <se:Title>Polygon fill</se:Title>
      <se:FeatureTypeStyle>
        <se:Rule>
          <se:PolygonSymbolizer>
            <se:Fill>
              <se:SvgParameter name="fill">#f6ad55</se:SvgParameter>
            </se:Fill>
            <se:Stroke>
              <se:SvgParameter name="stroke">#c05621</se:SvgParameter>
            </se:Stroke>
          </se:PolygonSymbolizer>
        </se:Rule>
      </se:FeatureTypeStyle>
    </se:UserStyle>
  </se:NamedLayer>
</se:StyledLayerDescriptor>
</code></pre>
      <p><strong>När?</strong> Områden.</p>
      <p><strong>Om detta inte fungerar:</strong> säkerställ att lagret är polygon.</p>

      <h3 id="labels">LABELS – enkel etikett</h3>
      <pre><code><?xml version="1.0" encoding="UTF-8"?>
<se:StyledLayerDescriptor version="1.1.0"
  xmlns:se="http://www.opengis.net/se"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://www.opengis.net/se
    https://schemas.opengis.net/se/1.1.0/Symbolizer.xsd">
  <se:NamedLayer>
    <se:Name>example_layer</se:Name>
    <se:UserStyle>
      <se:Title>Simple labels</se:Title>
      <se:FeatureTypeStyle>
        <se:Rule>
          <se:TextSymbolizer>
            <se:Label>
              <ogc:PropertyName>name</ogc:PropertyName>
            </se:Label>
            <se:Font>
              <se:SvgParameter name="font-family">Arial</se:SvgParameter>
              <se:SvgParameter name="font-size">12</se:SvgParameter>
            </se:Font>
            <se:Fill>
              <se:SvgParameter name="fill">#1a202c</se:SvgParameter>
            </se:Fill>
          </se:TextSymbolizer>
        </se:Rule>
      </se:FeatureTypeStyle>
    </se:UserStyle>
  </se:NamedLayer>
</se:StyledLayerDescriptor>
</code></pre>
      <p><strong>När?</strong> Namn på objekt. <strong>Om detta inte fungerar:</strong> kontrollera fältnamn.</p>
      <p><strong>Om detta inte fungerar:</strong> testa med ett hårdkodat label‑värde för felsökning.</p>

      <h2 id="parameterguide">Parameterguide (kort)</h2>
      <table>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Vad gör den</th>
            <th>Säker att ändra</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>fill</td>
            <td>Fyllnadsfärg</td>
            <td>Ja</td>
          </tr>
          <tr>
            <td>stroke</td>
            <td>Kantfärg</td>
            <td>Ja</td>
          </tr>
          <tr>
            <td>stroke-width</td>
            <td>Kanttjocklek</td>
            <td>Ja</td>
          </tr>
          <tr>
            <td>Size</td>
            <td>Symbolstorlek</td>
            <td>Ja</td>
          </tr>
          <tr>
            <td>se: namespace</td>
            <td>Struktur/standard</td>
            <td>Nej</td>
          </tr>
        </tbody>
      </table>

      <h2>Avancerat (med varning)</h2>
      <p><strong>Varning:</strong> Om detta inte fungerar – återgå till nivå 1.</p>
      <pre><code><!-- ogc:Filter (exempel) -->
<ogc:Filter>
  <ogc:PropertyIsEqualTo>
    <ogc:PropertyName>status</ogc:PropertyName>
    <ogc:Literal>aktiv</ogc:Literal>
  </ogc:PropertyIsEqualTo>
</ogc:Filter>
</code></pre>
      <pre><code><!-- ScaleDenominator (exempel) -->
<se:MinScaleDenominator>10000</se:MinScaleDenominator>
<se:MaxScaleDenominator>50000</se:MaxScaleDenominator>
</code></pre>
      <pre><code><!-- Dynamiska labels (exempel) -->
<se:Label>
  <ogc:PropertyName>name</ogc:PropertyName>
</se:Label>
</code></pre>

      <h2 id="sld-felsokning">SLD‑felsökning</h2>
      <h3 id="sld-import">Import och namespaces</h3>
      <ul>
        <li>Schemafel beror ofta på fel namespace eller version.</li>
        <li>Validera att <code>se:</code>-prefix används konsekvent.</li>
      </ul>
      <h3 id="sld-scale">Skala och synlighet</h3>
      <ul>
        <li>Min/MaxScaleDenominator kan göra att inget syns.</li>
        <li>Labels kräver rätt attribut och rimlig storlek.</li>
      </ul>
      <h3 id="sld-cache">Cache och uppdatering</h3>
      <ul>
        <li>Gamla stilar beror ofta på cache i GeoWebCache.</li>
        <li>Testa hård refresh när stilen uppdateras.</li>
      </ul>
      <ul>
        <li>Vanligt fel: SLD 1.0 vs SE 1.1 (prefix och schema).</li>
        <li>Styles som laddar men inte syns → fel datatyp eller fel skala.</li>
        <li>Namespace‑misstag → kontrollera <code>se:</code> och schemaLocation.</li>
        <li>Om du testar WMS → rensa cache bara vid behov.</li>
      </ul>

      <div class="callout callout-info">
      <h3>QGIS‑tips (hög nivå)</h3>
        <p>
          Skapa en stil i QGIS, exportera som SLD och importera i GeoServer.
          TODO: verifiera exakta klicksteg i vår miljö.
        </p>
      </div>

      <h2 id="origo-impact">Hur detta påverkar kartklienten (Origo)</h2>
      <p>
        Origo visar resultatet av GeoServers rendering. Om du byter style i GeoServer syns det
        i WMS‑bilder och tiles utan att Origo‑konfigurationen behöver ändras.
      </p>
      <pre><code># exempel på WMS‑anrop med style (placeholder)
https://localhost/geoserver/example_workspace/wms?service=WMS&request=GetMap&layers=example_layer&styles=example_style
</code></pre>
      <p>TODO: verifiera hur style‑parametern anges i Origo‑konfiguration.</p>
    </section>
  </main>

  <script src="main.js"></script>
</body>
</html>
