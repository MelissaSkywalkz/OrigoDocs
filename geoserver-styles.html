<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GeoServer styles</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="main.css">
</head>
<body class="layout">
  <nav class="sidenav" id="sidenav" aria-label="Sidomeny">
    <div class="sidebar-header">
      <a href="index.html" class="logo" aria-label="Till startsidan">>_ Origo Docs</a>
    </div>
    <div class="nav-search">
      <input
        type="search"
        id="navSearch"
        placeholder="Sök i GIS-handboken…"
        aria-label="Sök"
      />
      <ul id="searchResults" class="search-results hidden"></ul>
    </div>
    <div class="nav-content">
      <div class="nav-section">
        <button class="accordion-button" aria-expanded="true" aria-controls="nav-docs">
          Dokumentation
        </button>
        <div class="accordion-panel" id="nav-docs">
          <a href="index.html">Start</a>
          <a href="page.html">JSON 101</a>
          <a href="origo-guide.html">Origo guide</a>
          <a href="layermanager.html">Layermanager</a>
          <a href="geoserver.html">GeoServer 101</a>
          <a href="geoserver-styles.html" aria-current="page">GeoServer styles</a>
          <a href="#overview">Översikt</a>
          <a href="#sld-cookbook">SLD Cookbook</a>
          <a href="#labels">Labels</a>
          <a href="#sld-felsokning">SLD‑felsökning</a>
          <a href="#css-extension">CSS Extension</a>
          <a href="#mbstyle">MBStyle</a>
          <a href="geowebcache.html">GeoWebCache</a>
          <a href="origo-server.html">Origo Server</a>
          <a href="git-vscode.html">Git & VS Code</a>
          <a href="examples.html">Origo-recept</a>
          <a href="faq-gis.html">FAQ GIS</a>
          <a href="npm.html">npm & plugins</a>
          <a href="release-playbook.html">Release‑playbook</a>
          <a href="troubleshooting.html">Felsökning</a>
        </div></div>
      </div>
      <div class="nav-section">
        <button class="accordion-button" aria-expanded="false" aria-controls="nav-shortcuts">
          Snabblänkar
        </button>
        <div class="accordion-panel" id="nav-shortcuts" hidden>
          <a href="https://docs.geoserver.org/">GeoServer Docs (extern)</a>
          <a href="https://origo-map.github.io/origo-documentation/latest/#origo-map">Origo Docs (extern)</a>
        </div></div>
      </div>
    </div>
  </nav>

  <main class="main" id="main">
    <header class="topbar">
      <button class="nav-toggle" data-nav-toggle aria-label="Öppna eller stäng meny" aria-expanded="true">
        <img src="sort.png" alt="" />
      </button>
      <div class="topbar-title">
        <span class="eyebrow">GeoServer</span>
        <h1>Styles: SLD, CSS, MBStyle</h1>
      </div>
      <div class="topbar-meta">
        <span class="status-pill">SE 1.1 fokus</span>
      </div>
    </header>

    <section class="wizard" data-wizard="geoserver-styles"></section>

    <section class="doc-content">
      <h2 id="overview">SLD: SE 1.1</h2>
      <p>
        Här bygger du stilar för GeoServer med SLD/SE 1.1. Importera en style, koppla den
        till lagret och testa i preview innan du går vidare.
      </p>
      <div class="callout callout-check">
        <strong>Snabbcheck</strong>
        Importera style → koppla till layer → testa preview.
      </div>

      <h2 id="format">Välj rätt format</h2>
      <ul>
        <li><strong>SLD/SE 1.1:</strong> standardiserat och stabilt.</li>
        <li><strong>CSS Extension:</strong> snabbare att skriva, kräver extension.</li>
        <li><strong>MBStyle:</strong> passar vektor‑tiles och moderna kartstilar.</li>
      </ul>

      <h2 id="sld-cookbook">SLD Cookbook: färdiga exempel</h2>
      <p><strong>Denna SLD är en referensmall.</strong> Kopiera exakt.</p>
      <p><strong>Ändra endast:</strong> färg (fill, stroke), storlek (Size), stroke‑width. <strong>Ändra INTE:</strong> namespaces, <code>se:</code>-prefix, version, struktur.</p>
      <div class="callout callout-warn">
        <strong>Vanligt misstag</strong>
        Fel namespace/schema eller fel datatyp (point/line/polygon) gör att inget
        syns, även om SLD importeras.
      </div>

      <h3>Punkt: cirkel</h3>
      <pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;se:StyledLayerDescriptor version=&quot;1.1.0&quot;
  xmlns:se=&quot;http://www.opengis.net/se&quot;
  xmlns:ogc=&quot;http://www.opengis.net/ogc&quot;
  xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;
    http://www.opengis.net/se
    https://schemas.opengis.net/se/1.1.0/Symbolizer.xsd&quot;&gt;
  &lt;se:NamedLayer&gt;
    &lt;se:Name&gt;example_layer&lt;/se:Name&gt;
    &lt;se:UserStyle&gt;
      &lt;se:Title&gt;Simple point style&lt;/se:Title&gt;
      &lt;se:FeatureTypeStyle&gt;
        &lt;se:Rule&gt;
          &lt;se:PointSymbolizer&gt;
            &lt;se:Graphic&gt;
              &lt;se:Mark&gt;
                &lt;se:WellKnownName&gt;circle&lt;/se:WellKnownName&gt;
                &lt;se:Fill&gt;
                  &lt;se:SvgParameter name=&quot;fill&quot;&gt;#0072B2&lt;/se:SvgParameter&gt;
                &lt;/se:Fill&gt;
                &lt;se:Stroke&gt;
                  &lt;se:SvgParameter name=&quot;stroke&quot;&gt;#ffffff&lt;/se:SvgParameter&gt;
                  &lt;se:SvgParameter name=&quot;stroke-width&quot;&gt;1&lt;/se:SvgParameter&gt;
                &lt;/se:Stroke&gt;
              &lt;/se:Mark&gt;
              &lt;se:Size&gt;10&lt;/se:Size&gt;
            &lt;/se:Graphic&gt;
          &lt;/se:PointSymbolizer&gt;
        &lt;/se:Rule&gt;
      &lt;/se:FeatureTypeStyle&gt;
    &lt;/se:UserStyle&gt;
  &lt;/se:NamedLayer&gt;
&lt;/se:StyledLayerDescriptor&gt;
</code></pre>
      <p><strong>Ändra bara:</strong> layer‑namn, färg, storlek, attribut.</p>

      <h3>Punkt: ikon</h3>
      <pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;se:StyledLayerDescriptor version=&quot;1.1.0&quot;
  xmlns:se=&quot;http://www.opengis.net/se&quot;
  xmlns:ogc=&quot;http://www.opengis.net/ogc&quot;
  xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;
    http://www.opengis.net/se
    https://schemas.opengis.net/se/1.1.0/Symbolizer.xsd&quot;&gt;
  &lt;se:NamedLayer&gt;
    &lt;se:Name&gt;example_layer&lt;/se:Name&gt;
    &lt;se:UserStyle&gt;
      &lt;se:Title&gt;Point icon&lt;/se:Title&gt;
      &lt;se:FeatureTypeStyle&gt;
        &lt;se:Rule&gt;
          &lt;se:PointSymbolizer&gt;
            &lt;se:Graphic&gt;
              &lt;se:ExternalGraphic&gt;
                &lt;se:OnlineResource xlink:type=&quot;simple&quot; xlink:href=&quot;https://localhost/icons/example.png&quot;/&gt;
                &lt;se:Format&gt;image/png&lt;/se:Format&gt;
              &lt;/se:ExternalGraphic&gt;
              &lt;se:Size&gt;20&lt;/se:Size&gt;
            &lt;/se:Graphic&gt;
          &lt;/se:PointSymbolizer&gt;
        &lt;/se:Rule&gt;
      &lt;/se:FeatureTypeStyle&gt;
    &lt;/se:UserStyle&gt;
  &lt;/se:NamedLayer&gt;
&lt;/se:StyledLayerDescriptor&gt;
</code></pre>
      <p><strong>Ändra bara:</strong> layer‑namn, ikon‑URL, storlek.</p>

      <h3>Linje: solid</h3>
      <pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;se:StyledLayerDescriptor version=&quot;1.1.0&quot;
  xmlns:se=&quot;http://www.opengis.net/se&quot;
  xmlns:ogc=&quot;http://www.opengis.net/ogc&quot;
  xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;
    http://www.opengis.net/se
    https://schemas.opengis.net/se/1.1.0/Symbolizer.xsd&quot;&gt;
  &lt;se:NamedLayer&gt;
    &lt;se:Name&gt;example_layer&lt;/se:Name&gt;
    &lt;se:UserStyle&gt;
      &lt;se:Title&gt;Solid line&lt;/se:Title&gt;
      &lt;se:FeatureTypeStyle&gt;
        &lt;se:Rule&gt;
          &lt;se:LineSymbolizer&gt;
            &lt;se:Stroke&gt;
              &lt;se:SvgParameter name=&quot;stroke&quot;&gt;#444444&lt;/se:SvgParameter&gt;
              &lt;se:SvgParameter name=&quot;stroke-width&quot;&gt;2&lt;/se:SvgParameter&gt;
            &lt;/se:Stroke&gt;
          &lt;/se:LineSymbolizer&gt;
        &lt;/se:Rule&gt;
      &lt;/se:FeatureTypeStyle&gt;
    &lt;/se:UserStyle&gt;
  &lt;/se:NamedLayer&gt;
&lt;/se:StyledLayerDescriptor&gt;
</code></pre>
      <p><strong>Ändra bara:</strong> layer‑namn, färg, linjebredd.</p>

      <h3>Linje: streckad</h3>
      <pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;se:StyledLayerDescriptor version=&quot;1.1.0&quot;
  xmlns:se=&quot;http://www.opengis.net/se&quot;
  xmlns:ogc=&quot;http://www.opengis.net/ogc&quot;
  xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;
    http://www.opengis.net/se
    https://schemas.opengis.net/se/1.1.0/Symbolizer.xsd&quot;&gt;
  &lt;se:NamedLayer&gt;
    &lt;se:Name&gt;example_layer&lt;/se:Name&gt;
    &lt;se:UserStyle&gt;
      &lt;se:Title&gt;Dashed line&lt;/se:Title&gt;
      &lt;se:FeatureTypeStyle&gt;
        &lt;se:Rule&gt;
          &lt;se:LineSymbolizer&gt;
            &lt;se:Stroke&gt;
              &lt;se:SvgParameter name=&quot;stroke&quot;&gt;#444444&lt;/se:SvgParameter&gt;
              &lt;se:SvgParameter name=&quot;stroke-width&quot;&gt;2&lt;/se:SvgParameter&gt;
              &lt;se:SvgParameter name=&quot;stroke-dasharray&quot;&gt;6 4&lt;/se:SvgParameter&gt;
            &lt;/se:Stroke&gt;
          &lt;/se:LineSymbolizer&gt;
        &lt;/se:Rule&gt;
      &lt;/se:FeatureTypeStyle&gt;
    &lt;/se:UserStyle&gt;
  &lt;/se:NamedLayer&gt;
&lt;/se:StyledLayerDescriptor&gt;
</code></pre>
      <p><strong>Ändra bara:</strong> layer‑namn, färg, linjebredd, dasharray.</p>

      <h3>Polygon: fyllning och kant</h3>
      <pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;se:StyledLayerDescriptor version=&quot;1.1.0&quot;
  xmlns:se=&quot;http://www.opengis.net/se&quot;
  xmlns:ogc=&quot;http://www.opengis.net/ogc&quot;
  xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;
    http://www.opengis.net/se
    https://schemas.opengis.net/se/1.1.0/Symbolizer.xsd&quot;&gt;
  &lt;se:NamedLayer&gt;
    &lt;se:Name&gt;example_layer&lt;/se:Name&gt;
    &lt;se:UserStyle&gt;
      &lt;se:Title&gt;Polygon fill&lt;/se:Title&gt;
      &lt;se:FeatureTypeStyle&gt;
        &lt;se:Rule&gt;
          &lt;se:PolygonSymbolizer&gt;
            &lt;se:Fill&gt;
              &lt;se:SvgParameter name=&quot;fill&quot;&gt;#f6ad55&lt;/se:SvgParameter&gt;
            &lt;/se:Fill&gt;
            &lt;se:Stroke&gt;
              &lt;se:SvgParameter name=&quot;stroke&quot;&gt;#c05621&lt;/se:SvgParameter&gt;
            &lt;/se:Stroke&gt;
          &lt;/se:PolygonSymbolizer&gt;
        &lt;/se:Rule&gt;
      &lt;/se:FeatureTypeStyle&gt;
    &lt;/se:UserStyle&gt;
  &lt;/se:NamedLayer&gt;
&lt;/se:StyledLayerDescriptor&gt;
</code></pre>
      <p><strong>Ändra bara:</strong> layer‑namn, färg, kant.</p>

      <h3 id="labels">Labels: enkel etikett</h3>
      <pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;se:StyledLayerDescriptor version=&quot;1.1.0&quot;
  xmlns:se=&quot;http://www.opengis.net/se&quot;
  xmlns:ogc=&quot;http://www.opengis.net/ogc&quot;
  xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;
    http://www.opengis.net/se
    https://schemas.opengis.net/se/1.1.0/Symbolizer.xsd&quot;&gt;
  &lt;se:NamedLayer&gt;
    &lt;se:Name&gt;example_layer&lt;/se:Name&gt;
    &lt;se:UserStyle&gt;
      &lt;se:Title&gt;Simple labels&lt;/se:Title&gt;
      &lt;se:FeatureTypeStyle&gt;
        &lt;se:Rule&gt;
          &lt;se:TextSymbolizer&gt;
            &lt;se:Label&gt;
              &lt;ogc:PropertyName&gt;name&lt;/ogc:PropertyName&gt;
            &lt;/se:Label&gt;
            &lt;se:Font&gt;
              &lt;se:SvgParameter name=&quot;font-family&quot;&gt;Arial&lt;/se:SvgParameter&gt;
              &lt;se:SvgParameter name=&quot;font-size&quot;&gt;12&lt;/se:SvgParameter&gt;
            &lt;/se:Font&gt;
            &lt;se:Fill&gt;
              &lt;se:SvgParameter name=&quot;fill&quot;&gt;#1a202c&lt;/se:SvgParameter&gt;
            &lt;/se:Fill&gt;
          &lt;/se:TextSymbolizer&gt;
        &lt;/se:Rule&gt;
      &lt;/se:FeatureTypeStyle&gt;
    &lt;/se:UserStyle&gt;
  &lt;/se:NamedLayer&gt;
&lt;/se:StyledLayerDescriptor&gt;
</code></pre>
      <p><strong>Ändra bara:</strong> layer‑namn, attribut, textstorlek.</p>

      <h2 id="parameterguide">Parameterguide</h2>
      <table>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Vad gör den</th>
            <th>Säker att ändra</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>fill</td>
            <td>Fyllnadsfärg</td>
            <td>Ja</td>
          </tr>
          <tr>
            <td>stroke</td>
            <td>Kantfärg</td>
            <td>Ja</td>
          </tr>
          <tr>
            <td>stroke-width</td>
            <td>Kanttjocklek</td>
            <td>Ja</td>
          </tr>
          <tr>
            <td>Size</td>
            <td>Symbolstorlek</td>
            <td>Ja</td>
          </tr>
          <tr>
            <td>se: namespace</td>
            <td>Struktur/standard</td>
            <td>Nej</td>
          </tr>
        </tbody>
      </table>

      <h2>Avancerat</h2>
      <p><strong>Varning:</strong> Återgå till nivå 1 om något blir otydligt.</p>
      <pre><code class="language-xml">&lt;!-- ogc:Filter (exempel) --&gt;
&lt;ogc:Filter&gt;
  &lt;ogc:PropertyIsEqualTo&gt;
    &lt;ogc:PropertyName&gt;status&lt;/ogc:PropertyName&gt;
    &lt;ogc:Literal&gt;aktiv&lt;/ogc:Literal&gt;
  &lt;/ogc:PropertyIsEqualTo&gt;
&lt;/ogc:Filter&gt;
</code></pre>
      <pre><code class="language-xml">&lt;!-- ScaleDenominator (exempel) --&gt;
&lt;se:MinScaleDenominator&gt;10000&lt;/se:MinScaleDenominator&gt;
&lt;se:MaxScaleDenominator&gt;50000&lt;/se:MaxScaleDenominator&gt;
</code></pre>
      <pre><code class="language-xml">&lt;!-- Dynamiska labels (exempel) --&gt;
&lt;se:Label&gt;
  &lt;ogc:PropertyName&gt;name&lt;/ogc:PropertyName&gt;
&lt;/se:Label&gt;
</code></pre>

      <h2 id="sld-felsokning">SLD‑felsökning</h2>
      <h3 id="sld-import">Import och namespaces</h3>
      <ul>
        <li>Schemafel beror ofta på fel namespace eller version.</li>
        <li>Validera att <code>se:</code>-prefix används konsekvent.</li>
      </ul>
      <h3 id="sld-scale">Skala och synlighet</h3>
      <ul>
        <li>Min/MaxScaleDenominator kan göra att inget syns.</li>
        <li>Labels kräver rätt attribut och rimlig storlek.</li>
      </ul>
      <h3 id="sld-cache">Cache och uppdatering</h3>
      <ul>
        <li>Gamla stilar beror ofta på cache i GeoWebCache.</li>
        <li>Testa hård refresh när stilen uppdateras.</li>
      </ul>
      <ul>
        <li>Vanligt fel: SLD 1.0 vs SE 1.1 (prefix och schema).</li>
        <li>Styles som laddar men inte syns → fel datatyp eller fel skala.</li>
        <li>Namespace‑misstag → kontrollera <code>se:</code> och schemaLocation.</li>
        <li>Om du testar WMS → rensa cache bara vid behov.</li>
      </ul>

      <div class="callout callout-info">
      <h3>QGIS‑tips</h3>
        <p>
          Skapa en stil i QGIS, exportera som SLD och importera i GeoServer.
          TODO: verifiera exakta klicksteg i vår miljö.
        </p>
      </div>

      <h2 id="origo-impact">Hur detta påverkar kartklienten i Origo</h2>
      <p>
        Origo visar resultatet av GeoServers rendering. Om du byter style i GeoServer syns det
        i WMS‑bilder och tiles utan att Origo‑konfigurationen behöver ändras.
      </p>
      <pre><code class="language-xml"># exempel på WMS‑anrop med style (placeholder)
https://localhost/geoserver/example_workspace/wms?service=WMS&amp;request=GetMap&amp;layers=example_layer&amp;styles=example_style
</code></pre>
      <p>TODO: verifiera hur style‑parametern anges i Origo‑konfiguration.</p>

      <h2 id="css-extension">CSS Extension</h2>
      <p>
        CSS Extension är ett snabbare sätt att skriva styles. Det passar för enkla regler
        och snabba justeringar, men kräver att extensionen är installerad i GeoServer.
      </p>
      <pre><code class="language-css">* {
  mark: symbol("circle");
  mark-size: 10;
  fill: #3b82f6;
  stroke: #ffffff;
  stroke-width: 1;
}
</code></pre>
      <pre><code class="language-css">* {
  stroke: #0f766e;
  stroke-width: 2;
  stroke-dasharray: 6 3;
}
</code></pre>
      <pre><code class="language-css">* {
  fill: #facc15;
  stroke: #b45309;
  stroke-width: 1;
  label: [name];
  font-family: "Arial";
  font-size: 12;
  label-fill: #1f2937;
}
</code></pre>

      <h2 id="mbstyle">MBStyle</h2>
      <p>
        MBStyle är bra för modern styling och vektor‑tiles. Du behöver MBStyle‑stöd i GeoServer
        och ett vektor‑tile‑lager som källa.
      </p>
      <pre><code class="language-json" data-lang="mbstyle">{
  "version": 8,
  "name": "Polygon fill",
  "sources": {
    "vector-source": {
      "type": "vector",
      "url": "http://localhost/tiles.json"
    }
  },
  "layers": [
    {
      "id": "fill-layer",
      "type": "fill",
      "source": "vector-source",
      "source-layer": "layer_name",
      "paint": {
        "fill-color": "#60a5fa",
        "fill-opacity": 0.8
      }
    }
  ]
}
</code></pre>
      <pre><code class="language-json" data-lang="mbstyle">{
  "version": 8,
  "name": "Line stroke",
  "sources": {
    "vector-source": {
      "type": "vector",
      "url": "http://localhost/tiles.json"
    }
  },
  "layers": [
    {
      "id": "line-layer",
      "type": "line",
      "source": "vector-source",
      "source-layer": "layer_name",
      "paint": {
        "line-color": "#1f2937",
        "line-width": 2,
        "line-dasharray": [2, 2]
      }
    }
  ]
}
</code></pre>
      <pre><code class="language-json" data-lang="mbstyle">{
  "version": 8,
  "name": "Symbol label",
  "sources": {
    "vector-source": {
      "type": "vector",
      "url": "http://localhost/tiles.json"
    }
  },
  "layers": [
    {
      "id": "label-layer",
      "type": "symbol",
      "source": "vector-source",
      "source-layer": "layer_name",
      "layout": {
        "text-field": ["get", "name"],
        "text-size": 12,
        "text-offset": [0, 0.8]
      },
      "paint": {
        "text-color": "#111827"
      }
    }
  ]
}
</code></pre>
    </section>
  </main>

  <script src="main.js"></script>
</body>
</html>
